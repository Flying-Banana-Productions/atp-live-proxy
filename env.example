# Server Configuration
PORT=3000
NODE_ENV=development

# ATP API Configuration
ATP_API_BASE_URL=https://api.protennislive.com/feeds
ATP_BEARER_TOKEN=your_tournament_bearer_token_here

# Cache Configuration
CACHE_ENABLED=true
CACHE_TTL=30
CACHE_CHECK_PERIOD=60

# Filesystem Cache Configuration
# Path to directory for write-once filesystem cache
# When set, enables filesystem cache (takes priority over Redis/Memory)
# Cache files are written once on first request, then served indefinitely
# Use this at end of tournament to freeze data automatically
# Set: FILESYSTEM_CACHE_DIR=./freeze-cache
# Also set WEBSOCKET_ENABLED=false and EVENTS_ENABLED=false to stop all polling
# FILESYSTEM_CACHE_DIR=

# Redis Configuration (optional)
# If REDIS_URL is set and CACHE_ENABLED=true, Redis will be used as primary cache
# If Redis connection fails during startup, the server will exit with an error
# If REDIS_URL is not set, in-memory cache will be used
REDIS_URL=

# Redis Cache Flush (optional)
# Set to 'false' to disable automatic cache flush on startup
# Default: true (cache is flushed when Redis cache is initialized)
REDIS_FLUSH_ON_STARTUP=true

# Note: Endpoint-specific cache TTL values are configured in src/config/index.js

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Logging
LOG_LEVEL=info

# CORS Configuration (for production)
# Comma-separated list of allowed origins
# Example: ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
ALLOWED_ORIGINS=

# WebSocket Configuration
# Enable/disable WebSocket server (includes real-time updates and subscription polling)
# Set to 'false' to disable all WebSocket functionality and subscription-based polling
WEBSOCKET_ENABLED=true

# Event System Configuration
# Enable/disable the live tennis event generation system
EVENTS_ENABLED=true

# Comma-separated list of endpoints to monitor for events
# Default: /api/live-matches,/api/draws/live
EVENTS_ENDPOINTS=/api/live-matches,/api/draws/live

# Enable/disable console output for generated events
EVENTS_CONSOLE_OUTPUT=true

# Webhook configuration for sending events to external services
EVENTS_WEBHOOK_URL=http://localhost:3001/api/webhooks/atp-live/event
EVENTS_WEBHOOK_SECRET=your_shared_webhook_secret
EVENTS_WEBHOOK_TIMEOUT=5000
EVENTS_WEBHOOK_RETRIES=3
EVENTS_WEBHOOK_BATCH_SIZE=10
EVENTS_WEBHOOK_BATCH_INTERVAL=2000

# API Response Logging (for testing and debugging)
# Enable logging of ATP API responses to disk for replay testing
ENABLE_API_LOGGING=false

# Directory to store API response logs
# Default: ./logs/api-responses
# API_LOG_DIR=./logs/api-responses

# Log all endpoints vs only event-monitored endpoints
# Default: false (only log event endpoints)
# LOG_ALL_ENDPOINTS=false

# Number of days to retain log files
# Default: 30 days
# LOG_RETENTION_DAYS=30 